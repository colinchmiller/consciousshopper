/*! csa 2016-01-06 */
function appDom(a){for(var b=0;b<a.length;b++){var c=(3963.2*a[b].distance).toFixed(1),d="https://www.google.com/maps/dir/Current+Location/",e=a[b].latlong[0],f=a[b].latlong[1],g=d+e+","+f;$("#storeList").append('<div class="container"><div class="col-xs-4"><img src=" '+a[b].image+' " /></div><div class="col-xs-8"><h1 class="action" data-list=" '+b+' "><strong>'+a[b].name+" </strong></h1><h2>"+c+' miles</h2><button><a href=" '+g+' ">Directions</button></div></div>')}}function displayLoading(){$("#spin").addClass("spinner")}function displayCompleted(){$("#spin").removeClass("spinner")}var storeIdArray,test,myLatLng;$(document).ready(function(){displayLoading(),getCurrentLocation(),test=sessionStorage.getItem("store_ids"),storeIdArray=test.split(","),console.log("The storeIdArray: ",storeIdArray)});var getStores=function(){$.ajax({method:"GET",url:"/categorylist",data:{paramArray:storeIdArray},success:function(a){console.log("The response data: ",a),appDom(a),displayCompleted()}})},getCurrentLocation=function(){function a(a,b,c){b.setPosition(c),b.setContent(a?"Error: The Geolocation service failed.":"Error: Your browser doesn't support geolocation.")}myLatLng={},navigator.geolocation?navigator.geolocation.getCurrentPosition(function(a){myLatLng.lat=parseFloat(a.coords.latitude),myLatLng.lng=parseFloat(a.coords.longitude),getStores()}):a(!1,infoWindow,map.getCenter())};