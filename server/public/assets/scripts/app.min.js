/*! csa 2016-01-05 */
var storeInfo={};$(document).ready(function(){$("#addStoreForm").submit(addStore),$("#categoriesTab a").click(function(a){$(this).parent("li").hasClass("active")?$($(this).attr("href")).hide():(a.preventDefault(),$(this).tab("show"))})});var addStore=function(){console.log("Click!"),event.preventDefault(),storeInfo={};var a=[],b=new google.maps.Geocoder;$.each($(this).serializeArray(),function(a,b){storeInfo[b.name]=b.value});for(var c=$("input:checkbox:checked.group1").map(function(){return this.value}).get(),d=0;d<c.length;d++)a.push({category:c[d]});storeInfo.categories=a,b.geocode({address:storeInfo.address},function(a,b){if(b==google.maps.GeocoderStatus.OK){var c=a[0].geometry.location.lat(),d=a[0].geometry.location.lng(),e=[];e.push(c),e.push(d),storeInfo.latlong=e,postStore()}else alert("Geocode was not successful for the following reason: "+b)})},postStore=function(){$.ajax({type:"POST",url:"/addStore",data:storeInfo,success:function(a){clearForm()}})},clearForm=function(){$("#addStoreForm").find("input[type=text]").val(""),$("#addStoreForm").find("textarea").val(""),$("#addStoreForm").find("input[type=checkbox]").removeAttr("checked"),localStorage.removeItem("editInfo"),window.location.replace("/assets/views/sct97ad33min.html")},populateFields=function(){retrievedInfo=localStorage.getItem("editInfo"),retrievedInfo=JSON.parse(retrievedInfo),console.log("This is the retrievedInfo: ",retrievedInfo),$(".storename").val(retrievedInfo.name),$(".address").val(retrievedInfo.address),$(".description").val(retrievedInfo.description),$(".website").val(retrievedInfo.website),$(".image").val(retrievedInfo.image)},changeStore=function(a){console.log("Here is the retrievedInfo being passed to the ajax call: ",a),$.ajax({type:"GET",url:"/getstoreforedit",success:function(a){clearForm()}})};