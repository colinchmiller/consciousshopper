/*! csa 2016-01-05 */
function addStore(){event.preventDefault();var a={},b=[],c=new google.maps.Geocoder;retrievedInfo._id&&console.log("found the ID! It is: ",retrievedInfo._id),$.each($(this).serializeArray(),function(b,c){a[c.name]=c.value});for(var d=$("input:checkbox:checked.group1").map(function(){return this.value}).get(),e=0;e<d.length;e++)b.push({category:d[e]});a.categories=b,c.geocode({address:a.address},function(b,c){if(c==google.maps.GeocoderStatus.OK){var d=b[0].geometry.location.lat(),e=b[0].geometry.location.lng(),g=[];g.push(d),g.push(e),a.latlong=g,f()}else alert("Geocode was not successful for the following reason: "+c)});var f=function(){$.ajax({type:"POST",url:"/addStore",data:a,success:function(a){clearForm()}})}}var retrievedInfo;$(document).ready(function(){$("#addStoreForm").submit(addStore),populuteFields(),$("#categoriesTab a").click(function(a){$(this).parent("li").hasClass("active")?$($(this).attr("href")).hide():(a.preventDefault(),$(this).tab("show"))})});var clearForm=function(){$("#addStoreForm").find("input[type=text]").val(""),$("#addStoreForm").find("textarea").val(""),$("#addStoreForm").find("input[type=checkbox]").removeAttr("checked"),localStorage.removeItem("editInfo")},populuteFields=function(){retrievedInfo=localStorage.getItem("editInfo"),retrievedInfo=JSON.parse(retrievedInfo),console.log("This is the retrievedInfo: ",retrievedInfo),$(".storename").val(retrievedInfo.name),$(".address").val(retrievedInfo.address),$(".description").val(retrievedInfo.description),$(".website").val(retrievedInfo.website),$(".image").val(retrievedInfo.image)},editStore=function(){$.ajax({type:"GET",url:"/getstoreforedit",data:retreivedInfo,success:function(a){clearForm()}})};